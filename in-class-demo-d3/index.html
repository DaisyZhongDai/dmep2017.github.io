<html>

<head>
    <!-- <script src=""></script>
        <link rel="stylesheet" href=""> -->
    <script src="https://d3js.org/d3.v4.js"></script>

</head>

<body>
    <div id="chart">
        <div>Title of the graph</div>
        <svg width="300" height="200"></svg>
    </div>
    <script>
        var svg = d3.select('#chart svg')
            // svg
            //     .append('circle')
            //     .attr('cx', 50)
            //     .attr('cy', 160)
            //     .attr('r', 10)
        var data = [
            [{
                Country: 'A',
                GDP: 30,
                Life: 30,
                Population: 50
            }, {
                Country: 'B',
                GDP: 40,
                Life: 20,
                Population: 100
            }, {
                Country: 'D',
                GDP: 10,
                Life: 50,
                Population: 100
            }],
            [{
                Country: 'A',
                GDP: 120,
                Life: 50,
                Population: 50
            }, {
                Country: 'B',
                GDP: 50,
                Life: 50,
                Population: 100
            }, {
                Country: 'C',
                GDP: 200,
                Life: 80,
                Population: 100
            }],
            [{
                Country: 'A',
                GDP: 120,
                Life: 40,
                Population: 50
            }, {
                Country: 'B',
                GDP: 50,
                Life: 30,
                Population: 100
            }, {
                Country: 'C',
                GDP: 200,
                Life: 70,
                Population: 100
            }],
        ]

        function updateChart(data) {
            var circles = svg
                .selectAll('circle')
                .data(data, function(d, i) {
                    return d['Country']
                })

            circles
                .enter()
                .append('circle')
                .merge(circles)
                .transition()
                .attr('r', 10)
                .attr('cx', function(d, i) {
                    // console.log(d)
                    // console.log(i)
                    return d['GDP']
                })
                .attr('cy', function(d, i) {
                    // console.log(d)
                    // console.log(i)
                    return d['Life']
                })

            circles
                .exit()
                .transition()
                .style('fill', 'rgba(0,0,0,0)')
                .on('end', function() {
                    d3.select(this).remove()
                })

            svg.selectAll('circle')
                .on('click', function() {
                    console.log('here');
                    d3.select(this).remove()
                })

            // svg.on('click', function() {
            //     console.log('there');
            //     svg.append('circle')
            //         .attr('r', 20)
            //         .attr('cx', d3.event.clientX)
            //         .attr('cy', d3.event.clientY)
            // })
        }

        var yearIndex = 0;
        updateChart(data[yearIndex])

        // d3.interval(function() {
        //     console.log(yearIndex)
        //     updateChart(data[yearIndex])
        //     yearIndex = (yearIndex + 1) % data.length
        // }, 1000)
    </script>
</body>

</html>

<!-- <svg width="300" height="200">
            <circle r=20 cx=70 cy=170></circle>
                      <circle r=20 cx=50 cy=50></circle>
                                <circle r=20 cx=150 cy=150></circle>
                                
<g transform="rotate(-20)">
            <rect width=150 height=20 x=10 y=80>
            </rect>
             <text y=120 x=20>
                    My text
             </text>
</g>
                
        </svg> -->